---
title: 草稿：python的一些小trick
date: 2021-02-07 03:59:14
tags:
---

> 我一直觉得入门编程有更简单的方法，这里想介绍几个入门者可以用到的小trick。但是观察周围，我发现从开始学到真正可以用程序解决实际问题的过程不是“线性”的。学习几个简单的语法并不能帮我们用程序解决实际问题，相反，初学者需要学习很多概念上的东西才能实际应用程序解决问题。我觉得这样实际上是不太好的，因为在初学的很长一段时间里，初学者是得不到反馈的。
> 我个人在编程领域也是一个初学者，这里只是站在我的角度讲一讲我觉得哪些概念是我觉得比较困惑的，哪些概念可以不在一开始就传输给初学者。
> 我觉得应该会有很多人反对我的这些观点，因为面向对象是必学的，面向对象有很多好处，而且对新手来说许多库都使用了面向对象的思维模式，不学习面向对象无法理解这些库怎么用。但是我觉得很多人是不希望学很多前置知识就来编程的。我们应该让编程成为一件简单的事。而有一些东西确实可以帮助新手更方便地写出正确的代码。

首先是我这里说的函数式并不是指那个没有循环的函数式，而是说控制副作用在函数内部。状态是个好的东西，可以提高效率，更直观地写程序。然而过多的状态容易造成 bug 。我觉得用函数来控制状态影响的范围是一个好的编程实践。

实际上我觉得 Haskell 中的很多概念实际上很适合初学者，比如说全是不可变变量类型等等。我在初学的时候，认为函数式和过程式其实是更容易理解的。当然我觉得不是说面向对象不好，它绝对很有用，但是我学面向对象的时候确实花了不少功夫。

但是我觉得对变量重新赋值实际上对于新手来说是容易理解的，只是我们的赋值符号设计的不好而已，如果换成 `let` 或者 `<-` 会好很多。而且对于新手来说，递归可能不是那么好理解，循环也是计算机运算更为自然的方式，没必要不引入循环的概念。

另外我觉得 `.` 这个操作符的语义会对初学者造成误解。比如说 `class.method` 和 `package.function` 中的 `.` 的语义是不一样是的，一个是命名空间，另一个是方法调用，但是 python 使用了同一个操作符。实际上 `C++` 中他们就是不一样的操作符，`namespace::function` 和 `class.method`。

首先我认为可以不在一开始就要求初学者使用面向对象的概念。新手并不会写很长的程序，所以一般不太需要利用对象进行抽象。而且有许多人并不以编程为生，他们只是希望通过编程解决一些简单的实际问题，比如定时收发邮件，一键格式转换等等。理解面向对象是需要门槛的，而且并不是必须的。

事实上python中的许多概念都和面向对象有关。比如

```python
myList = [1,2,3,4]
myList.append(5)
```

我在学习 list 操作的时候，只是死记硬背这里要用 `myList.append(5)` 而不是 `append(myList, 5)`。这无疑增加了理解上的负担，不如在学习 oop 之后再介绍 `append` 方法及其好处(数据的封装等等)来的实在一些。

## 利用函数来保证安全性

函数会创造一个新的变量作用域，里面的变量不会直接影响外面的值。

## 使用 tuple 而不是 list

可是在函数内，我们依然可以对引用对象的值进行修改。对新手来说，很多时候这不是他们想要的。list 是新手最常接触的可变变量，所以我建议更多的使用不可变的 tuple 代替 list。对于我来说，在刚学 python 的时候，绝大多数错误都是 list 造成的。因为我经常想在函数中对 list 进行一些修改，然而期待 list 在函数外不被更改。如果使用 tuple 那么很多情况下，这种问题可以避免。当然使用不可变变量类型可能会导致性能的降低，但是对于新手来说，对的程序比快的程序更重要。我在学 python 的时候，有很大一堆内容都是教我怎么使用 list，然而我认为 tuple 更容易理解，在更多的情况下表现出更正确的行为。另外使用星号操作符，在 tuple 上增减元素一样很方便。

之前我在写五子棋的时候，想增加一个悔棋的操作，然而因为我直接修改了 list 中的值，而没有复制一份，所以程序并不按理想的方式运行。

虽然这样一来性能会下降不少，但是对于用户来说，内存中的操作被更好的隐藏，他们不需要去研究
```python
bList = aList.copy()
bList = aList
```

但是鉴于 python 对 tuple 的支持并没有 list 那么方便，所以我觉得还是不要使用可变变量的方法对变量进行修改。

```python
# 比如不要使用
myList[5] = 2

# 使用这个会更容易理解一些
def change(tpl:tuple, index:int, element:any) -> tuple:

```

```python
# 对 tuple 增加元素
myTuple = (1,2,3,4,5)
myTuple = (*myTuple, 6) # (1,2,3,4,5,6)

# 去掉开头
myTuple = myTuple[1:]

# 去掉结尾
myTuple = myTuple[:-1]

# 这样写python会自动转化成list, emm 所以python对 tuple 的支持并不是很好
_, *someList = myTuple


# 增加元素，这里也是 python 没有提供好用的 api
def insert(tpl: tuple, index: int, element: any) -> tuple:
    if index > len(tpl) or index < 0:
        raise IndexError("Index Out Of Range")
    return tpl[:index] + (element,) + tpl[index:]

# 这样写看起来很奇怪，我觉得不适合新手
myTuple = (*[*myTuple].insert(3,5))

# 这样对于新手来说容易理解很多
myTuple = insert(myTuple, 3, 4)



```

## 闭包

我觉得这个内容对新手来说可能要求太高了一点，不过python sicp 里很早就介绍了闭包的内容。所以我觉得早点介绍也可以。实际上这个概念我觉得并不复杂，只是大多数教材没有“平等看待”函数。我在学 python 的时候总觉得函数和类是特殊的东西。实际上不是的。他们也可以作为对象传递。

## 析构赋值

## 先学习使用 dict 再理解 oop

知识点的顺序

变量 -> 控制流 -> 函数 -> 元组(星号操作符，析构赋值) -> 循环 -> 闭包 -> 列表 -> 字典 -> OOP