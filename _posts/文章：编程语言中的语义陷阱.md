---
title: 文章：编程语言中的语义陷阱
date: 2020-10-11 01:33:50
tags:
---

> 编程语言里的很多符号都借鉴自数学中的符号。可是一些时候，他们的语义和我们预想的往往并不相同。这里我来列举一些我遇到的语义陷阱。
>
> 这篇可以和我的另一篇，数学中的等号的语义结合起来看。
>
> PS : 之后我接触了一下 Haskell，似乎这里所有的问题都解决了 🤦‍♀️

在初学编程的时候，我经常会搞混 `=` 和`==`。

## 赋值语句

我们学编程的第一条语句 赋值 就是一个语义陷阱。

这是一个老生常谈的问题。

```python
x = x + 1 # 和数学上的 = 不符
1 = x # = 左边只能是变量名
```

看起来如果我们把 `=` 改成 `<-` 的话，可能新手会更容易接受一些。

```python
x <- x + 1
```

但是这样我们也没有解决这个问题。

一开始学编程的时候，编程教材会用 “把变量名看作一个小盒子，内部保存了变量的值” 这个比喻来帮助理解。

但是我们看回之前一个例子 `x <- x + 1` 。这里很自然的我们可以理解为 先把 名为 `x` 小盒子里的值 取出来， 之后 `+ 1` 再之后放回名为 `x` 的小盒子里。我们发现 同样一个 `x` 在 赋值符号 的左边和右边有不一样的含义。

问题同样存在在

可能类似 PHP 的变量取值方式，或者直接把所有变量看作是指针 会看起来好一点。

```c
x <- $x + 1
x <- *x + 1
```

我不只是说赋值里的 `=` 和数学里的 `=` 有不一样的含义。就算我们把 `=` 改成 `<-` 依然不能解决这个问题。

## 值拷贝和引用拷贝

这里存在一个 “值拷贝” 和 “引用拷贝“ 的问题。

比如说

```js
x <- new Object();
y <- new Object();
z <- y;

x is y; // false
z is y; // true
```

## 可变数据类型

最后一个问题是可变数据类型并不按新手通常想的方式表现。

```python
foods = ["pizza","chicken","apple"]

def change_foods(foods):
    changed_foods = foods.append("salad") 
    # 这里是错的！！！
    return changed_foods

def change_foods2(foods):
  	foods.append("salad")
    #正确的写法是这样
```

